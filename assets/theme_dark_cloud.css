/* ===========================================
   COPILOT SALUD ANDALUCÍA - TEMA OSCURO PARA STREAMLIT CLOUD
   Versión optimizada SIN variables CSS, con valores directos
   =========================================== */

/* ========== BASE STYLES - FORZADOS ========== */
* {
    box-sizing: border-box !important;
}

/* Fondo principal de la app */
.stApp, .main, [data-testid="stAppViewContainer"] {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%) !important;
    color: #ffffff !important;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%) !important;
    color: #ffffff !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ========== HEADER ========== */
.main-header {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%) !important;
    padding: 2rem 2.5rem !important;
    border-radius: 16px !important;
    color: #ffffff !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3) !important;
    border: 1px solid #64748b !important;
    margin-bottom: 2rem !important;
}

.main-header h1 {
    font-size: 2.2rem !important;
    font-weight: 600 !important;
    color: #ffffff !important;
    margin-bottom: 0.5rem !important;
}

.main-header h3 {
    font-size: 1.1rem !important;
    color: #4ade80 !important;
    font-weight: 400 !important;
    margin-bottom: 0.75rem !important;
}

.main-header p {
    font-size: 0.95rem !important;
    color: #cbd5e1 !important;
    margin: 0.25rem 0 !important;
}

/* ========== SIDEBAR ========== */
.stSidebar, [data-testid="stSidebar"] {
    background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%) !important;
    border-right: 1px solid #64748b !important;
}

.stSidebar .stMarkdown, .stSidebar .stSelectbox label {
    color: #ffffff !important;
}

.sidebar-content {
    background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%) !important;
    border-radius: 16px !important;
    padding: 1.5rem !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
    border: 1px solid #64748b !important;
}

.sidebar-content h3 {
    color: #4ade80 !important;
    font-size: 1.2rem !important;
    font-weight: 600 !important;
    margin-bottom: 1rem !important;
}

/* ========== METRICS CARDS ========== */
.metric-card {
    background: #0f172a !important;
    padding: 1.5rem !important;
    border-radius: 16px !important;
    border-left: 4px solid #4ade80 !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3), 0 2px 6px rgba(0, 0, 0, 0.2) !important;
    margin-bottom: 1rem !important;
    border: 1px solid #64748b !important;
}

.metric-card:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3) !important;
    border-left-color: #34d399 !important;
}

.metric-value {
    font-size: 2rem !important;
    font-weight: 700 !important;
    color: #4ade80 !important;
    display: block !important;
}

.metric-label {
    font-size: 0.9rem !important;
    color: #f1f5f9 !important;
    font-weight: 500 !important;
}

/* ========== CHAT CONTAINER ========== */
.chat-container {
    background: #0f172a !important;
    border-radius: 16px !important;
    padding: 2rem !important;
    border: 1px solid #64748b !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3), 0 2px 6px rgba(0, 0, 0, 0.2) !important;
}

.chat-title {
    font-size: 1.6rem !important;
    font-weight: 600 !important;
    color: #ffffff !important;
}

/* ========== CHART CONTAINERS ========== */
.chart-container {
    background: #0f172a !important;
    border-radius: 16px !important;
    padding: 2rem !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3), 0 2px 6px rgba(0, 0, 0, 0.2) !important;
    margin-bottom: 2rem !important;
    border: 1px solid #64748b !important;
}

.chart-container:hover {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3) !important;
    transform: translateY(-1px) !important;
}

.chart-title {
    font-size: 1.4rem !important;
    font-weight: 600 !important;
    color: #ffffff !important;
}

/* ========== BUTTONS - MUY IMPORTANTE ========== */
.stButton > button {
    background: linear-gradient(135deg, #4ade80, #34d399) !important;
    color: #0f172a !important;
    border: none !important;
    border-radius: 12px !important;
    padding: 0.75rem 1.5rem !important;
    font-weight: 500 !important;
    font-size: 0.9rem !important;
    box-shadow: 0 2px 8px rgba(74, 222, 128, 0.3), 0 1px 4px rgba(74, 222, 128, 0.2) !important;
    transition: all 0.2s ease !important;
}

.stButton > button:hover {
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(74, 222, 128, 0.25), 0 2px 4px rgba(74, 222, 128, 0.15) !important;
    background: linear-gradient(135deg, #22d3ee, #34d399) !important;
}

/* Botones específicos por color */
button[kind="primary"] {
    background: linear-gradient(135deg, #4ade80, #34d399) !important;
    color: #0f172a !important;
}

button[kind="secondary"] {
    background: linear-gradient(135deg, #60a5fa, #3b82f6) !important;
    color: white !important;
}

/* ========== TABLES ========== */
.stDataFrame {
    border-radius: 12px !important;
    border: 1px solid #64748b !important;
    background: #0f172a !important;
}

.stDataFrame tbody tr:nth-child(even) {
    background: #1e293b !important;
}

.stDataFrame tbody tr:hover {
    background: rgba(74, 222, 128, 0.1) !important;
}

.stDataFrame td, .stDataFrame th {
    padding: 0.75rem !important;
    border-bottom: 1px solid #64748b !important;
    color: #ffffff !important;
}

/* ========== INPUTS - MÁXIMA ESPECIFICIDAD PARA CLOUD ========== */
/* HACK: Usar selectores con ID que tienen más peso que inline styles */
html body .stApp .main .stSelectbox,
html body .stApp .main div.stSelectbox,
html body .stApp .main [data-testid="stSelectbox"],
html body .stApp .main .stSelectbox > div,
html body .stApp .main .stSelectbox > div > div,
html body .stApp .main .stSelectbox > div > div > div,
html body .stApp .main .stSelectbox div[data-baseweb="select"],
html body .stApp .main div[data-baseweb="select"],
html body .stApp .main div[data-baseweb="select"] > div {
    background: #1e293b !important;
    background-color: #1e293b !important;
    border-radius: 12px !important;
    border: 2px solid #64748b !important;
    color: #ffffff !important;
}

/* Forzar TODO el árbol de selectbox */
html body .stApp .main .stSelectbox *,
html body .stApp .main div[data-baseweb="select"] * {
    background-color: #1e293b !important;
    color: #ffffff !important;
}

/* TextInput y TextArea - Máxima especificidad */
html body .stApp .main .stTextInput,
html body .stApp .main div.stTextInput,
html body .stApp .main .stTextArea,
html body .stApp .main div.stTextArea,
html body .stApp .main .stTextInput > div,
html body .stApp .main .stTextInput > div > div,
html body .stApp .main .stTextArea > div,
html body .stApp .main .stTextArea > div > div,
html body .stApp .main .stTextInput input,
html body .stApp .main .stTextArea textarea {
    background: #1e293b !important;
    background-color: #1e293b !important;
    border-radius: 12px !important;
    border: 2px solid #64748b !important;
    color: #ffffff !important;
}

html body .stApp .main .stTextInput *,
html body .stApp .main .stTextArea * {
    background-color: #1e293b !important;
    color: #ffffff !important;
}

/* Chat Input específico - Máxima especificidad */
html body .stApp .main .stChatInput,
html body .stApp .main div.stChatInput,
html body .stApp .main .stChatInput > div,
html body .stApp .main .stChatInput > div > div,
html body .stApp .main .stChatInput input,
html body .stApp .main .stChatInput textarea,
html body .stApp .main [data-testid="stChatInput"],
html body .stApp .main [data-testid="stChatInput"] input,
html body .stApp .main [data-testid="stChatInput"] textarea {
    background: #1e293b !important;
    background-color: #1e293b !important;
    border: 2px solid #64748b !important;
    border-radius: 12px !important;
    color: #ffffff !important;
}

html body .stApp .main .stChatInput *,
html body .stApp .main [data-testid="stChatInput"] * {
    background-color: #1e293b !important;
    color: #ffffff !important;
}

/* Inputs genéricos - Máxima especificidad */
html body .stApp .main input[type="text"],
html body .stApp .main input[type="password"],
html body .stApp .main input[type="email"],
html body .stApp .main textarea,
html body .stApp .main select {
    background: #1e293b !important;
    background-color: #1e293b !important;
    color: #ffffff !important;
    border: 2px solid #64748b !important;
    border-radius: 8px !important;
}

/* Hover states */
.stSelectbox:hover,
.stSelectbox > div:hover,
.stSelectbox > div > div:hover,
.stTextInput:hover,
.stTextInput > div:hover,
.stTextInput > div > div:hover,
.stTextArea:hover,
.stTextArea > div:hover,
.stTextArea > div > div:hover {
    border-color: #4ade80 !important;
}

/* Focus states */
.stSelectbox:focus-within,
.stSelectbox > div:focus-within,
.stTextInput:focus-within,
.stTextInput > div:focus-within,
.stTextArea:focus-within,
.stTextArea > div:focus-within {
    border-color: #4ade80 !important;
    box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1) !important;
}

/* Texto dentro de inputs - FORZADO */
.stSelectbox input,
.stTextInput input,
.stTextArea textarea,
.stChatInput input,
.stChatInput textarea,
input, textarea, select {
    color: #ffffff !important;
}

/* ========== STATUS MESSAGES ========== */
.success-box, .stSuccess {
    background: linear-gradient(135deg, rgba(52, 211, 153, 0.1), rgba(74, 222, 128, 0.05)) !important;
    border: 1px solid rgba(52, 211, 153, 0.2) !important;
    color: #34d399 !important;
    padding: 1rem !important;
    border-radius: 12px !important;
}

.info-box, .stInfo {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(96, 165, 250, 0.05)) !important;
    border: 1px solid rgba(96, 165, 250, 0.2) !important;
    color: #60a5fa !important;
    padding: 1rem !important;
    border-radius: 12px !important;
}

.warning-box, .stWarning {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(251, 191, 36, 0.05)) !important;
    border: 1px solid rgba(251, 191, 36, 0.2) !important;
    color: #fbbf24 !important;
    padding: 1rem !important;
    border-radius: 12px !important;
}

/* ========== TABS ========== */
.stTabs [data-baseweb="tab-list"] {
    background: #1e293b !important;
    border-radius: 12px 12px 0 0 !important;
    padding: 0.5rem !important;
    border-bottom: 2px solid #4ade80 !important;
}

.stTabs [data-baseweb="tab"] {
    background: transparent !important;
    border-radius: 12px !important;
    font-weight: 500 !important;
    color: #ffffff !important;
}

.stTabs [data-baseweb="tab"]:hover {
    background: rgba(74, 222, 128, 0.1) !important;
}

.stTabs [data-baseweb="tab"][aria-selected="true"] {
    background: linear-gradient(135deg, #4ade80, #34d399) !important;
    color: #0f172a !important;
    box-shadow: 0 2px 8px rgba(74, 222, 128, 0.2) !important;
}

/* ========== STREAMLIT TEXT - CRÍTICO ========== */
.stMarkdown, .stText, .stTextArea textarea, .stTextInput input, p, div, span {
    color: #ffffff !important;
}

/* Chat AI específico */
.stChatMessage, .stChat, [data-testid="stChatMessage"] {
    color: #ffffff !important;
    background: #0f172a !important;
}

.stChatMessage .stMarkdown,
.stChatMessage .stMarkdown p,
.stChatMessage .stMarkdown div,
.stChatMessage .stMarkdown span {
    color: #ffffff !important;
}

/* Input del chat */
.stChatInputContainer {
    background: #1e293b !important;
    border-color: #64748b !important;
}

.stChatInput input {
    background: #0f172a !important;
    color: #ffffff !important;
    border: 1px solid #64748b !important;
}

/* ========== ESTADO OPERATIVO - CARDS CRÍTICAS (ULTRA ESPECÍFICO) ========== */
/* Selectores múltiples para MÁXIMA especificidad */
div.status-card.status-card-operativo,
div.status-card.status-card-green,
div[class*="status-card-operativo"],
div[class*="status-card-green"],
.status-card-operativo,
.status-card-green {
    background: linear-gradient(135deg, #065f46 0%, #047857 100%) !important;
    color: white !important;
    padding: 2rem !important;
    border-radius: 16px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
    border: 2px solid #10b981 !important;
}

div.status-card.status-card-alerta,
div.status-card.status-card-orange,
div.status-card.status-card-warning,
div[class*="status-card-alerta"],
div[class*="status-card-orange"],
div[class*="status-card-warning"],
.status-card-alerta,
.status-card-orange,
.status-card-warning {
    background: linear-gradient(135deg, #92400e 0%, #b45309 100%) !important;
    color: white !important;
    padding: 2rem !important;
    border-radius: 16px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
    border: 2px solid #f59e0b !important;
}

div.status-card.status-card-monitoreo,
div.status-card.status-card-blue,
div[class*="status-card-monitoreo"],
div[class*="status-card-blue"],
.status-card-monitoreo,
.status-card-blue {
    background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%) !important;
    color: white !important;
    padding: 2rem !important;
    border-radius: 16px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
    border: 2px solid #60a5fa !important;
}

div.status-card.status-card-predictivo,
div.status-card.status-card-purple,
div[class*="status-card-predictivo"],
div[class*="status-card-purple"],
.status-card-predictivo,
.status-card-purple {
    background: linear-gradient(135deg, #581c87 0%, #7c3aed 100%) !important;
    color: white !important;
    padding: 2rem !important;
    border-radius: 16px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
    border: 2px solid #a855f7 !important;
}

/* Asegurar texto blanco en status cards */
.status-card-operativo *,
.status-card-alerta *,
.status-card-monitoreo *,
.status-card-predictivo *,
.status-card-green *,
.status-card-orange *,
.status-card-blue *,
.status-card-purple * {
    color: white !important;
}

/* ========== ALERTAS DEL SISTEMA ========== */
.alert-critical {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1)) !important;
    border-left: 4px solid #ef4444 !important;
    color: #fca5a5 !important;
    padding: 1.5rem !important;
    border-radius: 12px !important;
    margin: 1rem 0 !important;
}

.alert-warning {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.1)) !important;
    border-left: 4px solid #fbbf24 !important;
    color: #fde047 !important;
    padding: 1.5rem !important;
    border-radius: 12px !important;
    margin: 1rem 0 !important;
}

.alert-info {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.2), rgba(59, 130, 246, 0.1)) !important;
    border-left: 4px solid #60a5fa !important;
    color: #bfdbfe !important;
    padding: 1.5rem !important;
    border-radius: 12px !important;
    margin: 1rem 0 !important;
}

/* ========== SCROLLBARS ========== */
::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
}

::-webkit-scrollbar-track {
    background: #1e293b !important;
    border-radius: 4px !important;
}

::-webkit-scrollbar-thumb {
    background: #4ade80 !important;
    border-radius: 4px !important;
}

::-webkit-scrollbar-thumb:hover {
    background: #34d399 !important;
}

/* ========== LAYOUT ========== */
.main .block-container {
    max-width: none !important;
    padding-top: 2rem !important;
    padding-bottom: 2rem !important;
    padding-left: 2rem !important;
    padding-right: 2rem !important;
}

/* ========== OVERRIDES DE ELEMENTOS INLINE ========== */
[style*="color: black"],
[style*="color:black"],
[style*="color:#000000"],
[style*="color:#000"],
[style*="color: rgb(0, 0, 0)"] {
    color: #ffffff !important;
}

[style*="background: white"],
[style*="background:white"],
[style*="background:#ffffff"],
[style*="background:#fff"],
[style*="background-color: white"],
[style*="background-color:white"] {
    background: #0f172a !important;
}

/* ========== ACCESO CONCEDIDO ========== */
.access-granted {
    background: linear-gradient(135deg, #4CAF50 0%, #66bb6a 100%) !important;
    padding: 1rem !important;
    border-radius: 10px !important;
    color: white !important;
    margin: 1rem 0 !important;
}

.access-granted h4,
.access-granted p,
.access-granted span,
.access-granted * {
    color: white !important;
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
    .main-header {
        padding: 1.5rem 1rem !important;
    }

    .main-header h1 {
        font-size: 1.8rem !important;
    }

    .stButton > button {
        width: 100% !important;
        padding: 0.75rem 1rem !important;
    }
}
